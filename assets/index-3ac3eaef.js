var $e=Object.defineProperty;var Ze=(e,t,r)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ue=(e,t,r)=>(Ze(e,typeof t!="symbol"?t+"":t,r),r),De=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var j=(e,t,r)=>(De(e,t,"read from private field"),r?r.call(e):t.get(e)),fe=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},le=(e,t,r,n)=>(De(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))n(f);new MutationObserver(f=>{for(const d of f)if(d.type==="childList")for(const E of d.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&n(E)}).observe(document,{childList:!0,subtree:!0});function r(f){const d={};return f.integrity&&(d.integrity=f.integrity),f.referrerPolicy&&(d.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?d.credentials="include":f.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(f){if(f.ep)return;f.ep=!0;const d=r(f);fetch(f.href,d)}})();function _e(){return _e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}var de;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(de||(de={}));var Ie=function(e){return e},Ye="beforeunload",Ke="popstate";function je(e){e===void 0&&(e={});var t=e,r=t.window,n=r===void 0?document.defaultView:r,f=n.history;function d(){var x=n.location,L=x.pathname,T=x.search,z=x.hash,I=f.state||{};return[I.idx,Ie({pathname:L,search:T,hash:z,state:I.usr||null,key:I.key||"default"})]}var E=null;function k(){if(E)G.call(E),E=null;else{var x=de.Pop,L=d(),T=L[0],z=L[1];if(G.length){if(T!=null){var I=H-T;I&&(E={action:x,location:z,retry:function(){Z(I*-1)}},Z(I))}}else J(x)}}n.addEventListener(Ke,k);var C=de.Pop,W=d(),H=W[0],P=W[1],R=Ve(),G=Ve();H==null&&(H=0,f.replaceState(_e({},f.state,{idx:H}),""));function Q(x){return typeof x=="string"?x:Je(x)}function X(x,L){return L===void 0&&(L=null),Ie(_e({pathname:P.pathname,hash:"",search:""},typeof x=="string"?et(x):x,{state:L,key:Qe()}))}function te(x,L){return[{usr:x.state,key:x.key,idx:L},Q(x)]}function ae(x,L,T){return!G.length||(G.call({action:x,location:L,retry:T}),!1)}function J(x){C=x;var L=d();H=L[0],P=L[1],R.call({action:C,location:P})}function $(x,L){var T=de.Push,z=X(x,L);function I(){$(x,L)}if(ae(T,z,I)){var b=te(z,H+1),ee=b[0],Y=b[1];try{f.pushState(ee,"",Y)}catch{n.location.assign(Y)}J(T)}}function y(x,L){var T=de.Replace,z=X(x,L);function I(){y(x,L)}if(ae(T,z,I)){var b=te(z,H),ee=b[0],Y=b[1];f.replaceState(ee,"",Y),J(T)}}function Z(x){f.go(x)}var re={get action(){return C},get location(){return P},createHref:Q,push:$,replace:y,go:Z,back:function(){Z(-1)},forward:function(){Z(1)},listen:function(L){return R.push(L)},block:function(L){var T=G.push(L);return G.length===1&&n.addEventListener(Ye,Xe),function(){T(),G.length||n.removeEventListener(Ye,Xe)}}};return re}function Xe(e){e.preventDefault(),e.returnValue=""}function Ve(){var e=[];return{get length(){return e.length},push:function(r){return e.push(r),function(){e=e.filter(function(n){return n!==r})}},call:function(r){e.forEach(function(n){return n&&n(r)})}}}function Qe(){return Math.random().toString(36).substr(2,8)}function Je(e){var t=e.pathname,r=t===void 0?"/":t,n=e.search,f=n===void 0?"":n,d=e.hash,E=d===void 0?"":d;return f&&f!=="?"&&(r+=f.charAt(0)==="?"?f:"?"+f),E&&E!=="#"&&(r+=E.charAt(0)==="#"?E:"#"+E),r}function et(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var he=je(),B=function(){return B=Object.assign||function(t){for(var r,n=1,f=arguments.length;n<f;n++){r=arguments[n];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d])}return t},B.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),n}));function Ue(e,t){for(var r=e.length;r--;)if(e[r].pointerId===t.pointerId)return r;return-1}function ze(e,t){var r;if(t.touches){r=0;for(var n=0,f=t.touches;n<f.length;n++){var d=f[n];d.pointerId=r++,ze(e,d)}return}r=Ue(e,t),r>-1&&e.splice(r,1),e.push(t)}function tt(e,t){if(t.touches){for(;e.length;)e.pop();return}var r=Ue(e,t);r>-1&&e.splice(r,1)}function Fe(e){e=e.slice(0);for(var t=e.pop(),r;r=e.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function Ae(e){if(e.length<2)return 0;var t=e[0],r=e[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}var ge={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?ge={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(ge={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function ke(e,t,r,n){ge[e].split(" ").forEach(function(f){t.addEventListener(f,r,n)})}function Ce(e,t,r){ge[e].split(" ").forEach(function(n){t.removeEventListener(n,r)})}var rt=typeof document<"u"&&!!document.documentMode,Pe;function nt(){return Pe||(Pe=document.createElement("div").style)}var Be=["webkit","moz","ms"],xe={};function Me(e){if(xe[e])return xe[e];var t=nt();if(e in t)return xe[e]=e;for(var r=e[0].toUpperCase()+e.slice(1),n=Be.length;n--;){var f="".concat(Be[n]).concat(r);if(f in t)return xe[e]=f}}function Ee(e,t){return parseFloat(t[Me(e)])||0}function Se(e,t,r){r===void 0&&(r=window.getComputedStyle(e));var n=t==="border"?"Width":"";return{left:Ee("".concat(t,"Left").concat(n),r),right:Ee("".concat(t,"Right").concat(n),r),top:Ee("".concat(t,"Top").concat(n),r),bottom:Ee("".concat(t,"Bottom").concat(n),r)}}function ve(e,t,r){e.style[Me(t)]=r}function at(e,t){var r=Me("transform");ve(e,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function it(e,t,r){var n=t.x,f=t.y,d=t.scale,E=t.isSVG;if(ve(e,"transform","scale(".concat(d,") translate(").concat(n,"px, ").concat(f,"px)")),E&&rt){var k=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",k)}}function Te(e){var t=e.parentNode,r=window.getComputedStyle(e),n=window.getComputedStyle(t),f=e.getBoundingClientRect(),d=t.getBoundingClientRect();return{elem:{style:r,width:f.width,height:f.height,top:f.top,bottom:f.bottom,left:f.left,right:f.right,margin:Se(e,"margin",r),border:Se(e,"border",r)},parent:{style:n,width:d.width,height:d.height,top:d.top,bottom:d.bottom,left:d.left,right:d.right,padding:Se(t,"padding",n),border:Se(t,"border",n)}}}function ot(e){var t=e.ownerDocument,r=e.parentNode;return t&&r&&t.nodeType===9&&r.nodeType===1&&t.documentElement.contains(r)}function ct(e){return(e.getAttribute("class")||"").trim()}function st(e,t){return e.nodeType===1&&" ".concat(ct(e)," ").indexOf(" ".concat(t," "))>-1}function ut(e,t){for(var r=e;r!=null;r=r.parentNode)if(st(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}var ft=/^http:[\w\.\/]+svg$/;function lt(e){return ft.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function dt(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var We={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:it,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function He(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!ot(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=B(B({},We),t);var r=lt(e),n=e.parentNode;n.style.overflow=t.overflow,n.style.userSelect="none",n.style.touchAction=t.touchAction,(t.canvas?n:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,ve(e,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function f(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",ve(e,"transformOrigin","")}function d(a){a===void 0&&(a={});for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o]);(a.hasOwnProperty("cursor")||a.hasOwnProperty("canvas"))&&(n.style.cursor=e.style.cursor="",(t.canvas?n:e).style.cursor=t.cursor),a.hasOwnProperty("overflow")&&(n.style.overflow=a.overflow),a.hasOwnProperty("touchAction")&&(n.style.touchAction=a.touchAction,e.style.touchAction=a.touchAction)}var E=0,k=0,C=1,W=!1;X(t.startScale,{animate:!1,force:!0}),setTimeout(function(){Q(t.startX,t.startY,{animate:!1,force:!0})});function H(a,o,s){if(!s.silent){var c=new CustomEvent(a,{detail:o});e.dispatchEvent(c)}}function P(a,o,s){var c={x:E,y:k,scale:C,isSVG:r,originalEvent:s};return requestAnimationFrame(function(){typeof o.animate=="boolean"&&(o.animate?at(e,o):ve(e,"transition","none")),o.setTransform(e,c,o),H(a,c,o),H("panzoomchange",c,o)}),c}function R(a,o,s,c){var u=B(B({},t),c),l={x:E,y:k,opts:u};if(!u.force&&(u.disablePan||u.panOnlyWhenZoomed&&C===u.startScale))return l;if(a=parseFloat(a),o=parseFloat(o),u.disableXAxis||(l.x=(u.relative?E:0)+a),u.disableYAxis||(l.y=(u.relative?k:0)+o),u.contain){var v=Te(e),S=v.elem.width/C,_=v.elem.height/C,A=S*s,N=_*s,V=(A-S)/2,K=(N-_)/2;if(u.contain==="inside"){var ie=(-v.elem.margin.left-v.parent.padding.left+V)/s,F=(v.parent.width-A-v.parent.padding.left-v.elem.margin.left-v.parent.border.left-v.parent.border.right+V)/s;l.x=Math.max(Math.min(l.x,F),ie);var g=(-v.elem.margin.top-v.parent.padding.top+K)/s,w=(v.parent.height-N-v.parent.padding.top-v.elem.margin.top-v.parent.border.top-v.parent.border.bottom+K)/s;l.y=Math.max(Math.min(l.y,w),g)}else if(u.contain==="outside"){var ie=(-(A-v.parent.width)-v.parent.padding.left-v.parent.border.left-v.parent.border.right+V)/s,F=(V-v.parent.padding.left)/s;l.x=Math.max(Math.min(l.x,F),ie);var g=(-(N-v.parent.height)-v.parent.padding.top-v.parent.border.top-v.parent.border.bottom+K)/s,w=(K-v.parent.padding.top)/s;l.y=Math.max(Math.min(l.y,w),g)}}return u.roundPixels&&(l.x=Math.round(l.x),l.y=Math.round(l.y)),l}function G(a,o){var s=B(B({},t),o),c={scale:C,opts:s};if(!s.force&&s.disableZoom)return c;var u=t.minScale,l=t.maxScale;if(s.contain){var v=Te(e),S=v.elem.width/C,_=v.elem.height/C;if(S>1&&_>1){var A=v.parent.width-v.parent.border.left-v.parent.border.right,N=v.parent.height-v.parent.border.top-v.parent.border.bottom,V=A/S,K=N/_;t.contain==="inside"?l=Math.min(l,V,K):t.contain==="outside"&&(u=Math.max(u,V,K))}}return c.scale=Math.min(Math.max(a,u),l),c}function Q(a,o,s,c){var u=R(a,o,C,s);return E!==u.x||k!==u.y?(E=u.x,k=u.y,P("panzoompan",u.opts,c)):{x:E,y:k,scale:C,isSVG:r,originalEvent:c}}function X(a,o,s){var c=G(a,o),u=c.opts;if(!(!u.force&&u.disableZoom)){a=c.scale;var l=E,v=k;if(u.focal){var S=u.focal;l=(S.x/a-S.x/C+E*a)/a,v=(S.y/a-S.y/C+k*a)/a}var _=R(l,v,a,{relative:!1,force:!0});return E=_.x,k=_.y,C=a,P("panzoomzoom",u,s)}}function te(a,o){var s=B(B(B({},t),{animate:!0}),o);return X(C*Math.exp((a?1:-1)*s.step),s)}function ae(a){return te(!0,a)}function J(a){return te(!1,a)}function $(a,o,s,c){var u=Te(e),l={width:u.parent.width-u.parent.padding.left-u.parent.padding.right-u.parent.border.left-u.parent.border.right,height:u.parent.height-u.parent.padding.top-u.parent.padding.bottom-u.parent.border.top-u.parent.border.bottom},v=o.clientX-u.parent.left-u.parent.padding.left-u.parent.border.left-u.elem.margin.left,S=o.clientY-u.parent.top-u.parent.padding.top-u.parent.border.top-u.elem.margin.top;r||(v-=u.elem.width/C/2,S-=u.elem.height/C/2);var _={x:v/l.width*(l.width*a),y:S/l.height*(l.height*a)};return X(a,B(B({},s),{animate:!1,focal:_}),c)}function y(a,o){a.preventDefault();var s=B(B(B({},t),o),{animate:!1}),c=a.deltaY===0&&a.deltaX?a.deltaX:a.deltaY,u=c<0?1:-1,l=G(C*Math.exp(u*s.step/3),s).scale;return $(l,a,s,a)}function Z(a){var o=B(B(B({},t),{animate:!0,force:!0}),a);C=G(o.startScale,o).scale;var s=R(o.startX,o.startY,C,o);return E=s.x,k=s.y,P("panzoomreset",o)}var re,x,L,T,z,I,b=[];function ee(a){if(!ut(a.target,t)){ze(b,a),W=!0,t.handleStartEvent(a),re=E,x=k,H("panzoomstart",{x:E,y:k,scale:C,isSVG:r,originalEvent:a},t);var o=Fe(b);L=o.clientX,T=o.clientY,z=C,I=Ae(b)}}function Y(a){if(!(!W||re===void 0||x===void 0||L===void 0||T===void 0)){ze(b,a);var o=Fe(b),s=b.length>1,c=C;if(s){I===0&&(I=Ae(b));var u=Ae(b)-I;c=G(u*t.step/80+z).scale,$(c,o,{animate:!1},a)}(!s||t.pinchAndPan)&&Q(re+(o.clientX-L)/c,x+(o.clientY-T)/c,{animate:!1},a)}}function h(a){b.length===1&&H("panzoomend",{x:E,y:k,scale:C,isSVG:r,originalEvent:a},t),tt(b,a),W&&(W=!1,re=x=L=T=void 0)}var i=!1;function p(){i||(i=!0,ke("down",t.canvas?n:e,ee),ke("move",document,Y,{passive:!0}),ke("up",document,h,{passive:!0}))}function m(){i=!1,Ce("down",t.canvas?n:e,ee),Ce("move",document,Y),Ce("up",document,h)}return t.noBind||p(),{bind:p,destroy:m,eventNames:ge,getPan:function(){return{x:E,y:k}},getScale:function(){return C},getOptions:function(){return dt(t)},handleDown:ee,handleMove:Y,handleUp:h,pan:Q,reset:Z,resetStyle:f,setOptions:d,setStyle:function(a,o){return ve(e,a,o)},zoom:X,zoomIn:ae,zoomOut:J,zoomToPoint:$,zoomWithWheel:y}}He.defaultOptions=We;var ce,se;class vt{constructor(t){fe(this,ce,void 0);fe(this,se,void 0);ue(this,"handleElementDoubleClick",(t,r)=>{const n=structurizr.workspace.findElementById(r);switch(n.url&&window.open(n.url,"_blank"),n.type){case structurizr.constants.SOFTWARE_SYSTEM_ELEMENT_TYPE:this.navigateToSoftwareSystem(n);break;case structurizr.constants.CONTAINER_ELEMENT_TYPE:this.navigateToContainer(n.id);break;case structurizr.constants.CONTAINER_INSTANCE_ELEMENT_TYPE:this.navigateToContainer(n.containerId);break}});ue(this,"handleLocationChange",({location:t})=>{new URLSearchParams(t.search);const r=Re(t);r&&r!==j(this,ce).getCurrentView().key&&this.setDiagram(r)});ue(this,"setDiagram",t=>{j(this,ce).changeView(t,this.resetZoom)});ue(this,"resetZoom",()=>{j(this,se)&&j(this,se).destroy();const t=document.querySelector("#structurizr-diagram-target-canvas");le(this,se,He(t,{canvas:!0}));const r=n=>{const f=n.deltaY===0&&n.deltaX?n.deltaX:n.deltaY,E=j(this,se).getScale()*Math.exp(f*.3*-1/300);j(this,se).zoomToPoint(E,n)};t.parentElement.addEventListener("wheel",r)});le(this,ce,t),j(this,ce).onElementDoubleClicked(this.handleElementDoubleClick),he.listen(this.handleLocationChange)}syncDiagramWithURL(){Re(he.location)?this.handleLocationChange(he):Le(structurizr.workspace.getViews()[0].key)}navigateToSoftwareSystem(t){const r=j(this,ce).getCurrentView();let n;r.type===structurizr.constants.SYSTEM_LANDSCAPE_VIEW_TYPE||r.softwareSystemId!==t.id?(n=structurizr.workspace.findSystemContextViewsForSoftwareSystem(t.id),n.length||(n=structurizr.workspace.findContainerViewsForSoftwareSystem(t.id))):r.type===structurizr.constants.SYSTEM_CONTEXT_VIEW_TYPE&&(n=structurizr.workspace.findContainerViewsForSoftwareSystem(t.id)),n.length&&Le(n[0].key)}navigateToContainer(t){const r=structurizr.workspace.findComponentViewsForContainer(t);r.length&&Le(r[0].key)}}ce=new WeakMap,se=new WeakMap;function Le(e){const t=new URLSearchParams(he.location.search);t.set("diagram",e),he.push({search:t.toString()})}function Re(e){return new URLSearchParams(e.search).get("diagram")}function Ge(){return new URLSearchParams(he.location.search).get("embed")==="true"}var ht=gt;function pt(e){return function(t,r){var n=typeof e=="string"?t[e]:e(t),f=typeof e=="string"?r[e]:e(r);if(typeof n=="string"&&typeof f=="string"){var d=n.toUpperCase(),E=f.toUpperCase();return d<E?-1:d>E?1:0}return n-f}}function gt(e,t){if(!Array.isArray(e))throw new Error("arr should be an array");if(t!==void 0&&typeof t!="string"&&typeof t!="function")throw new Error("iteratee should be a string or a function");if(e.length<=1)return e;var r=e.slice();return t?r.sort(pt(t)):r.sort(function(n,f){return n-f})}var qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne={},mt={get exports(){return Ne},set exports(e){Ne=e}};(function(e,t){(function(r,n){e.exports=n()})(qe,function(){function r(n){var f=document,d=n.container||f.createElement("div"),E=n.preventSubmit||0;d.id=d.id||"autocomplete-"+Z();var k=d.style,C=n.debounceWaitMs||0,W=n.disableAutoSelect||!1,H=d.parentElement,P=[],R="",G=2,Q=n.showOnFocus,X,te=0,ae,J=!1,$=!1;if(n.minLength!==void 0&&(G=n.minLength),!n.input)throw new Error("input undefined");var y=n.input;d.className="autocomplete "+(n.className||""),d.setAttribute("role","listbox"),y.setAttribute("role","combobox"),y.setAttribute("aria-expanded","false"),y.setAttribute("aria-autocomplete","list"),y.setAttribute("aria-controls",d.id),y.setAttribute("aria-owns",d.id),y.setAttribute("aria-activedescendant",""),y.setAttribute("aria-haspopup","listbox"),k.position="absolute";function Z(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function re(){var g=d.parentNode;g&&g.removeChild(d)}function x(){ae&&window.clearTimeout(ae)}function L(){d.parentNode||(H||f.body).appendChild(d)}function T(){return!!d.parentNode}function z(){te++,P=[],R="",X=void 0,y.setAttribute("aria-activedescendant",""),y.setAttribute("aria-expanded","false"),re()}function I(){if(!T())return;y.setAttribute("aria-expanded","true"),k.height="auto",k.width=y.offsetWidth+"px";var g=0,w;function O(){var M=f.documentElement,q=M.clientTop||f.body.clientTop||0,D=M.clientLeft||f.body.clientLeft||0,oe=window.pageYOffset||M.scrollTop,ne=window.pageXOffset||M.scrollLeft;w=y.getBoundingClientRect();var U=w.top+y.offsetHeight+oe-q,pe=w.left+ne-D;k.top=U+"px",k.left=pe+"px",g=window.innerHeight-(w.top+y.offsetHeight),g<0&&(g=0),k.top=U+"px",k.bottom="",k.left=pe+"px",k.maxHeight=g+"px"}O(),O(),n.customize&&w&&n.customize(y,w,d,g)}function b(){d.textContent="",y.setAttribute("aria-activedescendant","");var g=function(D,oe,ne){var U=f.createElement("div");return U.textContent=D.label||"",U};n.render&&(g=n.render);var w=function(D,oe){var ne=f.createElement("div");return ne.textContent=D,ne};n.renderGroup&&(w=n.renderGroup);var O=f.createDocumentFragment(),M=Z();if(P.forEach(function(D,oe){if(D.group&&D.group!==M){M=D.group;var ne=w(D.group,R);ne&&(ne.className+=" group",O.appendChild(ne))}var U=g(D,R,oe);U&&(U.id=d.id+"_"+oe,U.setAttribute("role","option"),U.addEventListener("click",function(pe){$=!0;try{n.onSelect(D,y)}finally{$=!1}z(),pe.preventDefault(),pe.stopPropagation()}),D===X&&(U.className+=" selected",U.setAttribute("aria-selected","true"),y.setAttribute("aria-activedescendant",U.id)),O.appendChild(U))}),d.appendChild(O),P.length<1)if(n.emptyMsg){var q=f.createElement("div");q.id=d.id+"_"+Z(),q.className="empty",q.textContent=n.emptyMsg,d.appendChild(q),y.setAttribute("aria-activedescendant",q.id)}else{z();return}L(),I(),p()}function ee(){T()&&b()}function Y(){ee()}function h(g){g.target!==d?ee():g.preventDefault()}function i(){$||_(0)}function p(){var g=d.getElementsByClassName("selected");if(g.length>0){var w=g[0],O=w.previousElementSibling;if(O&&O.className.indexOf("group")!==-1&&!O.previousElementSibling&&(w=O),w.offsetTop<d.scrollTop)d.scrollTop=w.offsetTop;else{var M=w.offsetTop+w.offsetHeight,q=d.scrollTop+d.offsetHeight;M>q&&(d.scrollTop+=M-q)}}}function m(){var g=P.indexOf(X);X=g===-1?void 0:P[(g+P.length-1)%P.length],o(g)}function a(){var g=P.indexOf(X);X=P.length<1?void 0:g===-1?P[0]:P[(g+1)%P.length],o(g)}function o(g){P.length>0&&(c(g),s(P.indexOf(X)),p())}function s(g){var w=f.getElementById(d.id+"_"+g);w&&(w.classList.add("selected"),w.setAttribute("aria-selected","true"),y.setAttribute("aria-activedescendant",w.id))}function c(g){var w=f.getElementById(d.id+"_"+g);w&&(w.classList.remove("selected"),w.removeAttribute("aria-selected"),y.removeAttribute("aria-activedescendant"))}function u(g,w){var O=T();if(w==="Escape")z();else{if(!O||P.length<1)return;w==="ArrowUp"?m():a()}g.preventDefault(),O&&g.stopPropagation()}function l(g){if(X){E===2&&g.preventDefault(),$=!0;try{n.onSelect(X,y)}finally{$=!1}z()}E===1&&g.preventDefault()}function v(g){var w=g.key;switch(w){case"ArrowUp":case"ArrowDown":case"Escape":u(g,w);break;case"Enter":l(g);break}}function S(){Q&&_(1)}function _(g){y.value.length>=G||g===1?(x(),ae=window.setTimeout(function(){return A(y.value,g,y.selectionStart||0)},g===0||g===2?C:0)):z()}function A(g,w,O){if(!J){var M=++te;n.fetch(g,function(q){te===M&&q&&(P=q,R=g,X=P.length<1||W?void 0:P[0],b())},w,O)}}function N(g){if(n.keyup){n.keyup({event:g,fetch:function(){return _(0)}});return}!T()&&g.key==="ArrowDown"&&_(0)}function V(g){n.click&&n.click({event:g,fetch:function(){return _(2)}})}function K(){setTimeout(function(){f.activeElement!==y&&z()},200)}function ie(){A(y.value,3,y.selectionStart||0)}d.addEventListener("mousedown",function(g){g.stopPropagation(),g.preventDefault()}),d.addEventListener("focus",function(){return y.focus()}),re();function F(){y.removeEventListener("focus",S),y.removeEventListener("keyup",N),y.removeEventListener("click",V),y.removeEventListener("keydown",v),y.removeEventListener("input",i),y.removeEventListener("blur",K),window.removeEventListener("resize",Y),f.removeEventListener("scroll",h,!0),y.removeAttribute("role"),y.removeAttribute("aria-expanded"),y.removeAttribute("aria-autocomplete"),y.removeAttribute("aria-controls"),y.removeAttribute("aria-activedescendant"),y.removeAttribute("aria-owns"),y.removeAttribute("aria-haspopup"),x(),z(),J=!0}return y.addEventListener("keyup",N),y.addEventListener("click",V),y.addEventListener("keydown",v),y.addEventListener("input",i),y.addEventListener("blur",K),y.addEventListener("focus",S),window.addEventListener("resize",Y),f.addEventListener("scroll",h,!0),{destroy:F,fetch:ie}}return r})})(mt);var Oe={},wt={get exports(){return Oe},set exports(e){Oe=e}};(function(e){((t,r)=>{e.exports?e.exports=r():t.fuzzysort=r()})(qe,t=>{var r=(h,i)=>{if(h=="farzher")return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!h||!i)return b;var p=H(h);L(i)||(i=W(i));var m=p.bitflags;return(m&i._bitflags)!==m?b:R(p,i)},n=(h,i,p)=>{if(h=="farzher")return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:i?i[0]:b}];if(!h)return p&&p.all?P(h,i,p):I;var m=H(h),a=m.bitflags;m.containsSpace;var o=p&&p.threshold||z,s=p&&p.limit||T,c=0,u=0,l=i.length;if(p&&p.key)for(var v=p.key,S=0;S<l;++S){var _=i[S],A=x(_,v);if(A&&(L(A)||(A=W(A)),(a&A._bitflags)===a)){var N=R(m,A);N!==b&&(N.score<o||(N={target:N.target,_targetLower:"",_targetLowerCodes:b,_nextBeginningIndexes:b,_bitflags:0,score:N.score,_indexes:N._indexes,obj:_},c<s?(Y.add(N),++c):(++u,N.score>Y.peek().score&&Y.replaceTop(N))))}}else if(p&&p.keys)for(var V=p.scoreFn||re,K=p.keys,ie=K.length,S=0;S<l;++S){for(var _=i[S],F=new Array(ie),g=0;g<ie;++g){var v=K[g],A=x(_,v);if(!A){F[g]=b;continue}L(A)||(A=W(A)),(a&A._bitflags)!==a?F[g]=b:F[g]=R(m,A)}F.obj=_;var w=V(F);w!==b&&(w<o||(F.score=w,c<s?(Y.add(F),++c):(++u,w>Y.peek().score&&Y.replaceTop(F))))}else for(var S=0;S<l;++S){var A=i[S];if(A&&(L(A)||(A=W(A)),(a&A._bitflags)===a)){var N=R(m,A);N!==b&&(N.score<o||(c<s?(Y.add(N),++c):(++u,N.score>Y.peek().score&&Y.replaceTop(N))))}}if(c===0)return I;for(var O=new Array(c),S=c-1;S>=0;--S)O[S]=Y.poll();return O.total=c+u,O},f=(h,i,p)=>{if(typeof i=="function")return d(h,i);if(h===b)return b;i===void 0&&(i="<b>"),p===void 0&&(p="</b>");var m="",a=0,o=!1,s=h.target,c=s.length,u=h._indexes;u=u.slice(0,u.len).sort((S,_)=>S-_);for(var l=0;l<c;++l){var v=s[l];if(u[a]===l){if(++a,o||(o=!0,m+=i),a===u.length){m+=v+p+s.substr(l+1);break}}else o&&(o=!1,m+=p);m+=v}return m},d=(l,i)=>{if(l===b)return b;var p=l.target,m=p.length,a=l._indexes;a=a.slice(0,a.len).sort((_,A)=>_-A);for(var o="",s=0,c=0,u=!1,l=[],v=0;v<m;++v){var S=p[v];if(a[c]===v){if(++c,u||(u=!0,l.push(o),o=""),c===a.length){o+=S,l.push(i(o,s++)),o="",l.push(p.substr(v+1));break}}else u&&(u=!1,l.push(i(o,s++)),o="");o+=S}return l},E=h=>h._indexes.slice(0,h._indexes.len).sort((i,p)=>i-p),k=h=>{typeof h!="string"&&(h="");var i=Q(h);return{target:h,_targetLower:i._lower,_targetLowerCodes:i.lowerCodes,_nextBeginningIndexes:b,_bitflags:i.bitflags,score:b,_indexes:[0],obj:b}},C=h=>{typeof h!="string"&&(h=""),h=h.trim();var i=Q(h),p=[];if(i.containsSpace){var m=h.split(/\s+/);m=[...new Set(m)];for(var a=0;a<m.length;a++)if(m[a]!==""){var o=Q(m[a]);p.push({lowerCodes:o.lowerCodes,_lower:m[a].toLowerCase(),containsSpace:!1})}}return{lowerCodes:i.lowerCodes,bitflags:i.bitflags,containsSpace:i.containsSpace,_lower:i._lower,spaceSearches:p}},W=h=>{if(h.length>999)return k(h);var i=J.get(h);return i!==void 0||(i=k(h),J.set(h,i)),i},H=h=>{if(h.length>999)return C(h);var i=$.get(h);return i!==void 0||(i=C(h),$.set(h,i)),i},P=(h,i,p)=>{var m=[];m.total=i.length;var a=p&&p.limit||T;if(p&&p.key)for(var o=0;o<i.length;o++){var s=i[o],c=x(s,p.key);if(c){L(c)||(c=W(c)),c.score=z,c._indexes.len=0;var u=c;if(u={target:u.target,_targetLower:"",_targetLowerCodes:b,_nextBeginningIndexes:b,_bitflags:0,score:c.score,_indexes:b,obj:s},m.push(u),m.length>=a)return m}}else if(p&&p.keys)for(var o=0;o<i.length;o++){for(var s=i[o],l=new Array(p.keys.length),v=p.keys.length-1;v>=0;--v){var c=x(s,p.keys[v]);if(!c){l[v]=b;continue}L(c)||(c=W(c)),c.score=z,c._indexes.len=0,l[v]=c}if(l.obj=s,l.score=z,m.push(l),m.length>=a)return m}else for(var o=0;o<i.length;o++){var c=i[o];if(c&&(L(c)||(c=W(c)),c.score=z,c._indexes.len=0,m.push(c),m.length>=a))return m}return m},R=(h,i,p=!1)=>{if(p===!1&&h.containsSpace)return G(h,i);for(var m=h._lower,a=h.lowerCodes,o=a[0],s=i._targetLowerCodes,c=a.length,u=s.length,_=0,l=0,v=0;;){var S=o===s[l];if(S){if(y[v++]=l,++_,_===c)break;o=a[_]}if(++l,l>=u)return b}var _=0,A=!1,N=0,V=i._nextBeginningIndexes;V===b&&(V=i._nextBeginningIndexes=te(i.target)),l=y[0]===0?0:V[y[0]-1];var K=0;if(l!==u)for(;;)if(l>=u){if(_<=0||(++K,K>200))break;--_;var ie=Z[--N];l=V[ie]}else{var S=a[_]===s[l];if(S){if(Z[N++]=l,++_,_===c){A=!0;break}++l}else l=V[l]}var F=i._targetLower.indexOf(m,y[0]),g=~F;if(g&&!A)for(var w=0;w<v;++w)y[w]=F+w;var O=!1;g&&(O=i._nextBeginningIndexes[F-1]===F);{if(A)var M=Z,q=N;else var M=y,q=v;for(var D=0,oe=0,w=1;w<c;++w)M[w]-M[w-1]!==1&&(D-=M[w],++oe);var ne=M[c-1]-M[0]-(c-1);if(D-=(12+ne)*oe,M[0]!==0&&(D-=M[0]*M[0]*.2),!A)D*=1e3;else{for(var U=1,w=V[0];w<u;w=V[w])++U;U>24&&(D*=(U-24)*10)}g&&(D/=1+c*c*1),O&&(D/=1+c*c*1),D-=u-c,i.score=D;for(var w=0;w<q;++w)i._indexes[w]=M[w];return i._indexes.len=q,i}},G=(h,i)=>{for(var p=new Set,m=0,a=b,o=0,s=h.spaceSearches,v=0;v<s.length;++v){var c=s[v];if(a=R(c,i),a===b)return b;m+=a.score,a._indexes[0]<o&&(m-=o-a._indexes[0]),o=a._indexes[0];for(var u=0;u<a._indexes.len;++u)p.add(a._indexes[u])}var l=R(h,i,!0);if(l!==b&&l.score>m)return l;a.score=m;var v=0;for(let S of p)a._indexes[v++]=S;return a._indexes.len=v,a},Q=h=>{for(var i=h.length,p=h.toLowerCase(),m=[],a=0,o=!1,s=0;s<i;++s){var c=m[s]=p.charCodeAt(s);if(c===32){o=!0;continue}var u=c>=97&&c<=122?c-97:c>=48&&c<=57?26:c<=127?30:31;a|=1<<u}return{lowerCodes:m,bitflags:a,containsSpace:o,_lower:p}},X=h=>{for(var i=h.length,p=[],m=0,a=!1,o=!1,s=0;s<i;++s){var c=h.charCodeAt(s),u=c>=65&&c<=90,l=u||c>=97&&c<=122||c>=48&&c<=57,v=u&&!a||!o||!l;a=u,o=l,v&&(p[m++]=s)}return p},te=h=>{for(var i=h.length,p=X(h),m=[],a=p[0],o=0,s=0;s<i;++s)a>s?m[s]=a:(a=p[++o],m[s]=a===void 0?i:a);return m},ae=()=>{J.clear(),$.clear(),y=[],Z=[]},J=new Map,$=new Map,y=[],Z=[],re=h=>{for(var i=z,p=h.length,m=0;m<p;++m){var a=h[m];if(a!==b){var o=a.score;o>i&&(i=o)}}return i===z?b:i},x=(h,i)=>{var p=h[i];if(p!==void 0)return p;var m=i;Array.isArray(i)||(m=i.split("."));for(var a=m.length,o=-1;h&&++o<a;)h=h[m[o]];return h},L=h=>typeof h=="object",T=1/0,z=-T,I=[];I.total=0;var b=null,ee=h=>{var i=[],p=0,m={},a=o=>{for(var s=0,c=i[s],u=1;u<p;){var l=u+1;s=u,l<p&&i[l].score<i[u].score&&(s=l),i[s-1>>1]=i[s],u=1+(s<<1)}for(var v=s-1>>1;s>0&&c.score<i[v].score;v=(s=v)-1>>1)i[s]=i[v];i[s]=c};return m.add=o=>{var s=p;i[p++]=o;for(var c=s-1>>1;s>0&&o.score<i[c].score;c=(s=c)-1>>1)i[s]=i[c];i[s]=o},m.poll=o=>{if(p!==0){var s=i[0];return i[0]=i[--p],a(),s}},m.peek=o=>{if(p!==0)return i[0]},m.replaceTop=o=>{i[0]=o,a()},m},Y=ee();return{single:r,go:n,highlight:f,prepare:k,indexes:E,cleanup:ae}})})(wt);class yt{constructor(){const t=bt(),r=document.querySelector("#searchbox");Ne({input:r,emptyMsg:"No matches",fetch:function(n,f){f(n?Oe.go(n,t,{keys:["key","title"]}).map(({obj:d})=>d):t)},onSelect:function({key:n}){Le(n),r.blur(),r.value=""},render:function({key:n,title:f,description:d}){const E=document.createElement("div");return E.className="autocomplete-option",E.innerHTML=`${f||n}${d?`<br /><small>${d}</small>`:""}`,E},minLength:0,showOnFocus:!0,click:n=>n.fetch()}),document.body.addEventListener("keyup",n=>{Ge()||(n.key===" "||n.code==="Space"||n.keyCode===32)&&document.activeElement!==r&&r.focus()})}}function bt(){const e={...structurizr.workspace.views};return delete e.configuration,ht([].concat(...Object.values(e)),({key:t})=>t)}class xt{constructor(t,r){document.querySelector("#export").addEventListener("click",()=>{t.exportCurrentDiagramToPNG(!0,!1,n=>{r.util.downloadDataUri(n,`${t.getCurrentView().key}.png`)})})}}class Et{constructor(t){new ResizeObserver(()=>{t.resize(),t.zoomToWidthOrHeight()}).observe(document.body)}}var me,we,ye,be;class St{constructor(){fe(this,me,void 0);fe(this,we,void 0);fe(this,ye,void 0);fe(this,be,void 0);ue(this,"insertNavLinks",t=>{j(this,be).innerHTML=t.map(({text:r,href:n})=>`<a href='${n}' target='_blank'>${r}</a>`).join("")});ue(this,"removeLoading",t=>{j(this,me).classList.add("is-hidden"),j(this,ye).classList.remove("is-hidden"),t||j(this,we).classList.remove("is-hidden")});le(this,me,document.querySelector(".layout__loading")),le(this,we,document.querySelector(".layout__nav")),le(this,ye,document.querySelector(".layout__diagram")),le(this,be,document.querySelector(".nav-links"))}}me=new WeakMap,we=new WeakMap,ye=new WeakMap,be=new WeakMap;async function Lt(e){const t=new St,r=await _t(),n=await At();e.workspace=new e.Workspace(r),e.ui.loadThemes(()=>{t.insertNavLinks(n.links),t.removeLoading(Ge());const f=new e.ui.Diagram("structurizr-diagram-target",!1,()=>{f.setNavigationEnabled(!0);const d=new vt(f);d.setDiagram(e.workspace.getViews()[0].key),d.syncDiagramWithURL(),new yt,new xt(f,window.joint),new Et(f)})})}async function _t(){return await(await fetch("workspace.json")).json()}async function At(){return await(await fetch("nav.json")).json()}Lt(window.structurizr);
